const mge={TITLE:'Mini Game Engine',VERSION:'V1.0.0',bj:{},bv:{},ck:{},dg:{},dt:{},cqboard:{},hc:{}};mge.hg={get hd(){return mge.bj.ai.currentTime},get he(){return mge.bj.aq},set he(_value){mge.bj.be(_value)},hf:function(al,an,ad,ae,aq){mge.bj.ak(al,mge.bj.aj,an,ad,ae,aq)}};mge.hi={get bpm(){return mge.hc.fo},set bpm(_value){mge.hc.fo=_value},hh:function(fu,fv,aq){return mge.hc.ahTrack(fu,fv,aq)},start:function(){mge.hc.cg()},stop:function(){mge.hc.dd()},reset:function(){mge.hc.ah()}};mge.ki={get width(){return mge.bv.bo.width},set width(_value){mge.bv.bo.width=_value},get height(){return mge.bv.bo.height},set height(_value){mge.bv.bo.height=_value},get fps(){return mge.dg.da},get hj(){return mge.ck.cj()},start:function(cf){mge.ck.cg(cf)},hk:function(cf){mge.ck.ce(cf)},hl:function(){return mge.ck.ahSprite()}};mge.ho={get hm(){return mge.cqboard.cn},hn:function(cq){return mge.cqboard.co(cq)}};mge.hq={get hp(){return mge.dt.dj},get x(){return mge.dt._x},get y(){return mge.dt._y}};mge.fl={set hr(_value){this.dw=_value},get width(){return this.bl},set width(_value){this.bl=_value},get height(){return this.bm},set height(_value){this.bm=_value},get x(){return this._x},set x(_value){this._x=_value},get y(){return this._y},set y(_value){this._y=_value},get hs(){return this.bs},set hs(_value){this.bs=_value},get ht(){return this.bt},set ht(_value){this.bt=_value},get hu(){return this.eb},set hu(_value){this.eb=_value},get hv(){return this.ec},set hv(_value){this.ec=_value},get hw(){return this.eo(mge.dt._x,mge.dt._y)},get hp(){return this.dj(mge.dt._x,mge.dt._y,mge.dt.dj)},draw:function(){this.ed()},isColliding:function(ef){return this.ee(ef)},hy:function(){return this.ex()},ia:function(){this.fc()},hz:function(){this.fa()},ib:function(_method){return this.fe(_method)},ic:function(fl){return this.fg(fl)}};mge.bj.aa=function(ab,ac,ad,ae){let a=ab.a||0.0001;let d=ab.d||0.0001;let s=ab.s||0.0001;let r=ab.r||0.0001;let af=ab.minValue||0.0001;let ag=ab.maxValue||1;if(ae<=a){ac.setValueAtTime(af,ad);ac.exponentialRampToValueAtTime(ag*ae/a,ad+ae);ac.exponentialRampToValueAtTime(af,ad+ae+r)}else if(ae<=a+d){ac.setValueAtTime(af,ad);ac.exponentialRampToValueAtTime(ag,ad+a);ac.exponentialRampToValueAtTime(ag*s*d/ae,ad+ae);ac.exponentialRampToValueAtTime(af,ad+ae+r)}else{ac.setValueAtTime(af,ad);ac.exponentialRampToValueAtTime(ag,ad+a);ac.exponentialRampToValueAtTime(ag*s,ad+a+d);ac.setValueAtTime(ag*s,ad+ae);ac.exponentialRampToValueAtTime(af,ad+ae+r)}};mge.bj.ah=function(){this.ai='';this.aj='';this.aq=1;this.ai=new(window.AudioContext||window.webkitAudioContext)();this.aj=this.ai.createGain();this.aj.connect(this.ai.destination)};mge.bj.ak=function(al,am,an,ad,ae,aq){let aa=this.aa;let as=this.ai;let at=al.oscType||'sine';let au=al.filterType||'lowpass';let aqADSR=al.heADSR||{a:0,d:0,s:1,r:0,minValue:1,maxValue:1};let aw=al.pitchADSR||{a:0,d:0,s:1,r:0,minValue:an,maxValue:an};let ax=al.detuneADSR||{a:0,d:0,s:1,r:0,minValue:0,maxValue:0};let ay=al.filterFreqADSR||{a:0,d:0,s:1,r:0,minValue:20000,maxValue:20000};let az=al.filterQADSR||{a:0,d:0,s:1,r:0,minValue:1,maxValue:1};let bd='';if(at=='noise'){bd=as.createBufferSource();let buffer=as.createBuffer(1,as.sampleRate*(ae+aqADSR.r),as.sampleRate);let noiseOutput=buffer.getChannelData(0);for(let i=0;i<buffer.length;i++){noiseOutput[i]=Math.random()*2-1};bd.buffer=buffer;}else{bd=as.createOscillator();bd.type=at;aa(aw,bd.frequency,ad,ae);aa(ax,bd.detune,ad,ae)};bd.start(ad);bd.stop(ad+ae+aqADSR.r);let ba=as.createGain();aa(aqADSR,ba.gain,ad,ae);let bb=as.createGain();bb.gain.setValueAtTime(mge.bj.aqToGain(aq)*0.04,ad);let bc=as.createBiquadFilter();bc.type=au;aa(ay,bc.frequency,ad,ae);aa(az,bc.Q,ad,ae);bd.connect(bc);bc.connect(ba);ba.connect(bb);bb.connect(am)};mge.bj.be=function(aq){if(aq<=0){mge.bj.aq=0}else if(aq>=1){mge.bj.aq=1}else{mge.bj.aq=aq};mge.bj.aj.gain.setValueAtTime(mge.bj.aqToGain(mge.bj.aq),mge.hg.hd)};mge.bj.aqToGain=function(aq){let bi=30;if(aq<=0){return 0;}else if(aq>=1){return 1;}else{return Math.pow(10,(aq-1)*bi/10)}};mge.bv.ah=function(bl,bm,bn){this.bo='';this.bp='';this.bo=document.getElementById(bn);if(this.bo){this.bo.remove()};this.bo=document.createElement('canvas');this.bo.id=bn;this.bo.width=bl;this.bo.height=bm;document.body.appendChild(this.bo);this.bp=this.bo.getContext('2d')};mge.bv.bq=function(){let br=this.bo;let bs=(window.innerWidth-10)/br.width;let bt=(window.innerHeight-10)/br.height;let bu=Math.min(bs,bt);br.style.transformOrigin='0 0';br.style.transform='scale('+bu+')';br.display='block'};mge.ck.ah=function(bl,bm){this.bz='';this.ca='';this.cb=[];let bv=mge.bv;let bj=mge.bj;let dg=mge.dg;let dt=mge.dt;let cqboard=mge.cqboard;let hc=mge.hc;bv.ah(bl,bm,'GAME_RENDER_CANVAS');dt.ah(bv.bo);cqboard.ah();bj.ah();hc.ah();dg.ah()};mge.ck.ahSprite=function(){let fl=mge.fl;let bv=mge.bv;let ck=mge.ck;let bp=bv.bp;let _newSprite=Object.create(fl);_newSprite.ah(bp);ck.cb.push(_newSprite);return _newSprite};mge.ck.cj=function(){let ci=0;this.cb.forEach(fl=>{ci+=fl.ez.length;});return ci};mge.ck.ce=function(cf){if(!cf.start){cf.start=function(){}};if(!cf.update){cf.update=function(){}};if(!cf.draw){cf.draw=function(){}};this.ca=cf};mge.ck.cg=function(cf){let dg=mge.dg;this.ce(cf);dg.cg()};mge.cqboard.co=function(cq){if(this.cn.indexOf(cq)==-1){return false;}else{return true}};mge.cqboard.cp=function(e){let cq=e.key;if(this.cm.indexOf(cq)==-1){this.cm.push(cq)}};mge.cqboard.cr=function(e){let cq=e.key;let indexOfKey=this.cm.indexOf(cq);if(indexOfKey !=-1){this.cm.splice(indexOfKey,1)}};mge.cqboard.ct=function(){this.cn=[];this.cm=[]};mge.cqboard.cu=function(){this.cn=this.cm.slice()};mge.cqboard.ah=function(){this.cn=[];this.cm=[];document.onkeydown=function(e){mge.cqboard.cp(e)};document.onkeyup=function(e){mge.cqboard.cr(e)}};mge.dg.ah=function(){this.cx=0;this.cy=0;this.cz=0;this.da=0;this.db='stopped'};mge.dg.cg=function(){this.db='running';this.de()};mge.dg.dd=function(){this.db='stopped';this.de()};mge.dg.de=function(){let bv=mge.bv;let ck=mge.ck;let dt=mge.dt;let cqboard=mge.cqboard;let hc=mge.hc;let bp=bv.bp;let bo=bv.bo;let dg=mge.dg;let cb=ck.cb;dg.cy=performance.now();dg.cz=dg.cy-dg.cx;dg.da=1/(dg.cz/1000);dt.cu();cqboard.cu();if(ck.bz !=ck.ca){ck.bz=ck.ca;dt.ct();cqboard.ct();ck.bz.start()};ck.bz.update();cb.forEach(fl=>{fl.ev();});bp.clearRect(0,0,bo.width,bo.height);ck.bz.draw();bv.bq();hc.gq();dg.cx=dg.cy;if(dg.db=='running'){requestAnimationFrame(dg.de)}};mge.dt.dn=function(e){this.dm=true;this.dk=e.offsetX;this.dl=e.offsetY};mge.dt.dp=function(e){this.dk=e.offsetX;this.dl=e.offsetY};mge.dt.dq=function(e){this.dk='';this.dl=''};mge.dt.ct=function(){this._x=0;this._y=0;this.dj=false;this.dk=0;this.dl=0;this.dm=false};mge.dt.cu=function(){this._x=this.dk;this._y=this.dl;this.dj=this.dm;this.dm=false};mge.dt.ah=function(br){this._x=0;this._y=0;this.dj=false;this.dk=0;this.dl=0;this.dm=false;br.onclick=function(e){mge.dt.dn(e)};br.onhqmove=function(e){mge.dt.dp(e)};br.onhqout=function(e){mge.dt.dq(e)}};mge.fl.ah=function(dv){this.dv=dv;this.dw=function(){};this.bl=100;this.bm=100;this._x=0;this._y=0;this.bs=1;this.bt=1;this.eb=true;this.ec=false;this.ez=[];this.ey=false};mge.fl.ed=function(){if(this.eb){let dv=this.dv;dv.save();dv.translate(this._x-this.bl*this.bs/2,this._y-this.bm*this.bt/2);dv.scale(this.bs,this.bt);this.dw(dv);if(this.ec){dv.strokeStyle='red';dv.strokeRect(0,0,this.bl,this.bm);dv.strokeRect(this.bl/2,this.bm/2,1,1)};dv.restore()}};mge.fl.dj=function(el,em,en){if(this.eo(el,em)&& en){return true;}else{return false}};mge.fl.ee=function(ef){let eg=(this.bl/2)*this.bs+(ef.bl/2)*ef.bs;let eh=(this.bm/2)*this.bt+(ef.bm/2)*ef.bt;let ei=Math.abs(this._x-ef._x);let ej=Math.abs(this._y-ef._y);if(ei<eg && ej<eh){return true;}else{return false}};mge.fl.eo=function(el,em){let er=this._x+(this.bl/2)*this.bs;let es=this._x-(this.bl/2)*this.bs;let et=this._y+(this.bm/2)*this.bt;let eu=this._y-(this.bm/2)*this.bt;if(el>=es && el<=er && em>=eu && em<=et){return true;}else{return false}};mge.fl.ev=function(){let ew=[];this.ez.forEach(fk=>{if(fk.ey){ew.push(fk)};});this.ez=ew};mge.fl.ex=function(){let fk=Object.create(this);fk.ey=true;this.ez.push(fk);return fk};mge.fl.fc=function(){this.ey=false};mge.fl.fa=function(){this.ez=[]};mge.fl.fe=function(_method){this.ez.forEach(fk=>{fk[_method]();})};mge.fl.fg=function(ef){let fi=[];ef.ez.forEach(fk=>{if(this.ee(fk)){fi.push(fk)};});return fi};mge.hc.ah=function(){this.fn=[];this.fo=60;this.fp=1;this.fq=0;this.fr=0;this.db='stopped'};mge.hc.ga=function(gb){let gc={C:32.7,Db:34.6,D:36.7,Eb:38.9,E:41.2,F:43.6,Gb:46.2,G:49,Ab:51.9,A:55,Bb:58.3,B:61.7};let gd=parseInt(gb.substr(gb.length-1,gb.length),10);let ge=gb.substr(0,gb.length-1);let an=gc[ge]*Math.pow(2,gd);return Math.round(an)};mge.hc.ahTrack=function(fu,fv,aq){let fy=mge.hc.fy;let fn=mge.hc.fn;let fz=Object.create(fy);fz.fu=fu;fz.fv=fv;fz.aq=aq;fn.push(fz);return fz};mge.hc.gg=function(fy,gi){let fv=fy.fv;let aq=fy.aq;let gl=fy.ha(gi);let gm=this.fq;for(let i=0;i<gl.length;i+=2){let ge=gl[i];let geFrequency=this.ga(ge);let ae=gl[i+1]*60/this.fo;fv.play(geFrequency,gm,ae,aq);gm+=ae}};mge.hc.gq=function(){let gr=mge.bj.ai.currentTime;if(gr>=this.fr && this.db=='started'){for(let i=0;i<this.fn.length;i++){let fy=this.fn[i];this.gg(fy,this.fp)};this.fp+=1;this.fr=this.fq+3*60/this.fo;this.fq+=4*60/this.fo}};mge.hc.cg=function(){this.fp=1;this.fq=mge.bj.ai.currentTime;this.fr=0;this.db='started'};mge.hc.dd=function(){this.db='stopped'};mge.hc.fy={fu:[],fv:{},aq:1,be:function(aq){if(aq<=0){this.aq=0}else if(aq>=1){this.aq=1}else{this.aq=aq}},ha:function(hb){let _nbBars=this.fu.length;if(_nbBars==0){return ''}else if(hb%_nbBars==0){return this.fu[_nbBars-1]}else{return this.fu[hb%_nbBars-1]}}};mge.ck.ah(640,360);mge.id={ie:{ig:[]},ih:{}};mge.id.ih={set config(_value){this.ii(_value)},get config(){return this.ij},set scale(_value){this.im(_value)},get scale(){return this.bu},get width(){return this.ij._s._w*this.bu},get height(){return this.ij._s._h*this.bu},load:function(){this.ip()},draw:function(dv){this.ed(dv)}};mge.image={create:function(){return mge.id.ie.ahImage()},loadNextImage:function(){return mge.id.ie.ipNextImage()}};mge.id.ih.ii=function(_value){this.ij=_value;this.ik=false;this.il={}};mge.id.ih.im=function(_value){this.bu=_value;this.ik=false;this.il={}};mge.id.ih.ip=function(){let ij=this.ij;let bu=this.bu;let _s=ij._s||{};let _w=_s._w*bu||200;let _h=_s._h*bu||200;let iq=new OffscreenCanvas(_w,_h);let dv=iq.getContext('2d');let _p=ij._p||[];_p.forEach(function(_path){let fs=_path._fs||['C','red'];if(fs[0]=='C'){dv.fillStyle=fs[1]}else if(fs[0]=='LG'||fs[0]=='RG'){let ir={};if(fs[0]=='LG'){ir=dv.createLinearGradient(fs[1]*bu,fs[2]*bu,fs[3]*bu,fs[4]*bu)}else{ir=dv.createRadialGradient(fs[1]*bu,fs[2]*bu,fs[3]*bu,fs[4]*bu,fs[5]*bu,fs[6]*bu)};let _gp=_path._gp;_gp.forEach(function(_point){ir.addColorStop(_point[0],_point[1]);});dv.fillStyle=ir};let ss=_path._ss||['red',2,'square','miter'];dv.strokeStyle=ss[0];dv.lineWidth=ss[1]*bu;dv.lineCap=ss[2];dv.lineJoin=ss[3];dv.beginPath();let _c=_path._c||[];_c.forEach(function(_cmd){if(_cmd[0]=='M'){dv.moveTo(_cmd[1]*bu,_cmd[2]*bu)}else if(_cmd[0]=='L'){dv.lineTo(_cmd[1]*bu,_cmd[2]*bu)}else if(_cmd[0]=='Q'){dv.quadraticCurveTo(_cmd[1]*bu,_cmd[2]*bu,_cmd[3]*bu,_cmd[4]*bu)}else if(_cmd[0]=='B'){dv.bezierCurveTo(_cmd[1]*bu,_cmd[2]*bu,_cmd[3]*bu,_cmd[4]*bu,_cmd[5]*bu,_cmd[6]*bu)}else if(_cmd[0]=='C'){dv.arc(_cmd[1]*bu,_cmd[2]*bu,_cmd[3]*bu,0,2*Math.PI)}else if(_cmd[0]=='R'){dv.rect(_cmd[1]*bu,_cmd[2]*bu,_cmd[3]*bu,_cmd[4]*bu)}else if(_cmd[0]=='E'){dv.ellipse(_cmd[1]*bu,_cmd[2]*bu,_cmd[3]*bu,_cmd[4]*bu,_cmd[5],0,2*Math.PI)};});if(fs[0]!='N'){dv.fill()};if(ss[1]>0){dv.stroke()};let _txt=_path._t||[0,0,20,'normal','serif','start','alphabetic',''];let _fontSize=_txt[2]*bu;dv.font=_txt[3]+' '+_fontSize.toString()+'px '+_txt[4];dv.textAlign=_txt[5];dv.textBaseline=_txt[6];if(fs[0]!='N'){dv.fillText(_txt[7],_txt[0]*bu,_txt[1]*bu)};if(ss[1]>0){dv.strokeText(_txt[7],_txt[0]*bu,_txt[1]*bu)};});this.il=iq.transferToImageBitmap();this.ik=true};mge.id.ih.ah=function(){this.ij={};this.ik=false;this.bu=1;this.il={}};mge.id.ih.ed=function(dv){dv.drawImage(this.il,0,0)};mge.id.ie.ahImage=function(){let iw=Object.create(mge.id.ih);iw.ah();this.ig.push(iw);return iw};mge.id.ie.ipNextImage=function(){let iz=mge.id.ie.ig;let ja=0;let jb=false;let izLength=iz.length;if(iz.length==0){return 1;}else{iz.forEach(function(_img){if(_img.ik){ja+=1}else if(!jb){_img.ip();ja+=1;jb=true};});return ja/izLength}};mge.jx={jy:{}};mge.jx._activateOwnCloneAnimation=function(fk){fk.animation=Object.create(fk.__proto__.animation)};mge.jx.ipExtension=function(fl){fl.animation=Object.create(mge.jx.jy);fl.animation.ah()};mge.animation={loadExtention:function(fl){mge.jx.ipExtension(fl)},activateOwnCloneAnimation:function(fk){mge.jx._activateOwnCloneAnimation(fk)}};mge.jx.jy={set timeBetweenFrames(_value){this.kg=_value},get timeBetweenFrames(){return this.kg},set frames(kc){this.kb(kc)},draw:function(dv){this.ed(dv)},restart:function(){this.kh()}};mge.jx.jy.ed=function(dv){if(this.ke==-1){this.ke=0;this.kf=Date.now();}else if(Date.now()- this.kf>this.kg){this.ke+=1;if(this.ke>this.kc.length-1){this.ke=0};this.kf=Date.now()};this.kc[this.ke].draw(dv)};mge.jx.jy.kb=function(kc){this.kc=kc;this.ke==-1;this.kf=Date.now()};mge.jx.jy.ah=function(){this.kc=[];this.ke=-1;this.kf=Date.now();this.kg=100};mge.jx.jy.kh=function(){this.ke=-1};mge.jd={je:{ig:[]},jg:{}};mge.jd.jg={set config(_value){this.ii(_value)},get config(){return this.ij},load:function(){this.ip()},play:function(fo,fvs,_mix){this.gq(fo,fvs,_mix)}};mge.song={create:function(){return mge.jd.je.ahSong()},loadNextSong:function(){return mge.jd.je.ipNextSong()}};mge.jd.jg.ah=function(){this.ij={};this.ik=false;this.fn=[]};mge.jd.jg.ip=function(){let ij=this.ij;let fn=[];ij._p.forEach(function(_part){let _currentPart=[];ij._str.forEach(function(_section){_part._s[_section].forEach(function(gl){_currentPart.push(_part._b[gl]);});});fn.push(_currentPart);});this.fn=fn;this.ik=true};mge.jd.jg.gq=function(fo,fvs,_mix){let jn={play:function(an,ad,ae,aq){let al={heADSR:{a:0.02,d:400,s:0,r:0.1,minValue:0,maxValue:aq},oscType:'sine'};mge.hg.hf(al,an,ad,ae,aq)}};if(!this.ik){this.ip()};mge.hi.stop();mge.hi.reset();let jo=0;this.fn.forEach(function(fy){mge.hi.hh(fy,fvs[jo]||jn,_mix[jo]||1);jo+=1;});mge.hi.bpm=fo;mge.hi.start()};mge.jd.jg.ii=function(_value){this.ij=_value;this.ik=false;this.fn=[]};mge.jd.je.ahSong=function(){let js=Object.create(mge.jd.jg);js.ah();this.ig.push(js);return js};mge.jd.je.ipNextSong=function(){let iz=mge.jd.je.ig;let ju=0;let jv=false;let izLength=iz.length;if(iz.length==0){return 1;}else{iz.forEach(function(_song){if(_song.ik){ju+=1}else if(!jv){_song.ip();ju+=1;jv=true};});return ju/izLength}};ki={kj:'lh',kk:{lh:{},li:{},lj:{}},kl:{},km:{},kn:{},ko:{ll:mge.ki.hl(),lm:mge.ki.hl(),platform:mge.ki.hl(),player:mge.ki.hl(),eye:mge.ki.hl(),legs:mge.ki.hl(),numbers:mge.ki.hl(),background:mge.ki.hl(),textBox:mge.ki.hl()},kp:{ku:200,kv:100,kw:60,kx:70,ky:5000,kz:0,la:0,lb:0,lc:[],ld:'1',le:{xMin:0,xMax:0,yMin:0,yMax:0},lf:'1',lg:{xMin:10,xMax:10,yMin:10,yMax:10}},kq:{},kr:{liSong:mge.song.create()},ks:{},kt:[]};window.addEventListener("load",(event)=>{let loading=document.getElementById("loading");loading.remove();mge.ki.width=1280;mge.ki.height=720;mge.ki.start(ki.kk.lh)});ki.ks.lk=function(_box1,_box2){if(!(_box1.xMin>_box2.xMax||_box2.xMin>_box1.xMax||_box1.yMin>_box2.yMax||_box2.yMin>_box1.yMax)){return true}};ki.km.init=function(){ki.km.eye=Array(20).fill(ki.kl.lo);ki.km.eye.push(ki.kl.lp);ki.km.lq=[ki.kl.lq];ki.km.ml=[ki.kl.lr,ki.kl.ls,ki.kl.lt,ki.kl.lu]};ki.kl.ahColoredPattern=function(ij,lx,ly){let lz=mge.image.create();let ijCopy=structuredClone(ij);ijCopy._p[0]._fs[1]=lx;ijCopy._p[1]._fs[1]=ly;lz.config=ijCopy;lz.load();return mge.bv.bp.createPattern(lz.il,'repeat')};ki.kl.init=function(){ki.kl.ll=mge.image.create();ki.kl.ll.config={"_s":{"_w":400,"_h":400},"_p":[{"_fs":["C","#a301e6"],"_ss":["#000000","5","round","round"],"_gp":[],"_c":[["M","60","170"],["Q","75","70","200","60"],["Q","317","70","350","170"],["Q","310","130","280","165"],["Q","240","130","205","165"],["Q","170","130","135","165"],["Q","96","130","60","170"]],"_t":[8,8,8,"","","","",""]},{"_fs":["N",""],"_ss":["#000000","5","round","round"],"_gp":[],"_c":[["M","205","165"],["L","205","275"],["M","60","193"],["Q","100","191","105","230"],["Q","100","268","60","266"],["L","60","193"],["M","153","215"],["Q","144","281","167","275"],["M","185","355"],["L","185","291"],["Q","223","287","220","310"],["Q","223","335","185","330"],["M","315","254"],["Q","312","293","330","293"],["Q","354","293","350","255"]],"_t":[8,8,8,"","","","",""]},{"_fs":["N",""],"_ss":["#a301e6","5","round","round"],"_gp":[],"_c":[["M","120","275"],["Q","111","312","135","310"],["M","245","250"],["Q","239","314","260","310"],["M","295","250"],["Q","264","251","262","233"],["Q","264","210","282","210"],["Q","305","210","303","232"],["L","263","232"],["M","120","260"],["C","120","260","2"]],"_t":[8,8,8,"","","","",""]}]};ki.kl.ll.scale=0.3;ki.kl.ll.load();ki.kl.lm=mge.image.create();ki.kl.lm.config={"_s":{"_w":200,"_h":100},"_p":[{"_fs":["LG","0","0","0","12"],"_ss":["#0b3956","3","round","round"],"_gp":[[0,"#f7f7f7"],[1,"#2678ab"]],"_c":[["R","0","0","200","100"]]},{"_fs":["C","#0c3b59"],"_ss":["#0c3b59","1","round","round"],"_gp":[],"_c":[["M","0","0"]],"_t":["100","54","50","normal","Arial","center","middle","PLAY"]}]};ki.kl.lm.load();ki.kl.ln=mge.image.create();ki.kl.ln.config={"_s":{"_w":300,"_h":350},"_p":[{"_fs":["RG","110","175","0","150","175","133"],"_ss":["#cb5252","5","round","round"],"_gp":[[0,"#f5c6c6"],[1,"#e66465"]],"_c":[["M","15","124"],["Q","31","72","73","70"],["Q","118","72","113","110"],["L","111","212"],["L","117","213"],["Q","122","183","135","170"],["Q","122","168","115","101"],["Q","115","69","157","66"],["L","241","62"],["Q","294","69","252","138"],["Q","340","237","242","280"],["Q","167","301","133","259"],["Q","124","290","77","286"],["Q","3","289","4","249"],["Q","3","226","38","210"],["L","37","157"],["Q","12","151","15","124"]],"_t":[8,8,8,"","","","",""]},{"_fs":["N",""],"_ss":["#b64343","15","round","round"],"_gp":[],"_c":[["M","51","126"],["L","77","107"],["L","73","247"],["M","42","249"],["L","101","246"],["M","160","143"],["L","154","103"],["L","234","98"],["L","191","163"],["Q","269","161","252","228"],["Q","201","284","159","227"]],"_t":[8,8,8,"","","","",""]}]};ki.kl.ln.scale=0.2;ki.kl.ln.load();ki.kl.pi=mge.image.create();ki.kl.pi.config={"_s":{"_w":100,"_h":100},"_p":[{"_fs":["C","#030303"],"_ss":["#f50505","0","round","round"],"_gp":[],"_c":[["M","7","38"],["Q","15","15","26","15"],["L","85","15"],["L","85","27"],["L","66","27"],["Q","59","97","83","65"],["Q","53","125","56","27"],["L","37","27"],["Q","33","98","18","87"],["Q","27","60","28","27"],["Q","17","26","7","38"]],"_t":[8,8,8,"","","","",""]},{"_fs":["C","#ffffff"],"_ss":["#000000","2","round","round"],"_gp":[],"_c":[["C","48","21","12"],["M","41","11"],["Q","41","6","45","3"],["M","48","8"],["Q","48","5","51","3"],["M","53","9"],["Q","53","6","57","5"]],"_t":[8,8,8,"","","","",""]},{"_fs":["C","#000000"],"_ss":["#000000","0","round","round"],"_gp":[],"_c":[["C","48","24","3"]],"_t":[8,8,8,"","","","",""]}]};ki.kl.pi.scale=0.8;ki.kl.pi.load();ki.kl.lo=mge.image.create();ki.kl.lo.config={"_s":{"_w":130,"_h":140},"_p":[{"_fs":["C","#ffffff"],"_ss":["#000000","5","round","round"],"_gp":[],"_c":[["C","60","70","45"],["M","75","25"],["Q","80","16","102","11"],["M","85","32"],["Q","86","25","108","21"],["M","92","38"],["Q","100","33","114","34"]],"_t":[8,8,8,"","","","",""]},{"_fs":["C","#000000"],"_ss":["#000000","0","round","round"],"_gp":[],"_c":[["C","45","80","15"]],"_t":[8,8,8,"","","","",""]}]};ki.kl.lo.scale=0.2;ki.kl.lo.load();ki.kl.lp=mge.image.create();ki.kl.lp.config={"_s":{"_w":130,"_h":140},"_p":[{"_fs":["C","#ffffff"],"_ss":["#000000","5","round","round"],"_gp":[],"_c":[["C","60","70","45"],["M","25","100"],["Q","11","99","5","110"],["M","35","110"],["Q","19","111","12","125"],["M","50","115"],["Q","40","114","35","130"]],"_t":[8,8,8,"","","","",""]}]};ki.kl.lp.scale=0.2;ki.kl.lp.load();ki.kl.lq=mge.image.create();ki.kl.lq.config={"_s":{"_w":130,"_h":80},"_p":[{"_fs":["N",""],"_ss":["#000000","20","round","round"],"_gp":[],"_c":[["M","35","0"],["Q","30","31","32","68"],["L","14","66"],["M","98","3"],["Q","103","31","96","67"],["L","117","64"]],"_t":[8,8,8,"","","","",""]}]};ki.kl.lq.scale=0.2;ki.kl.lq.load();ki.kl.lr=mge.image.create();ki.kl.lr.config={"_s":{"_w":130,"_h":80},"_p":[{"_fs":["N",""],"_ss":["#000000","20","round","round"],"_gp":[],"_c":[["M","35","0"],["Q","34","31","32","68"],["L","51","66"],["M","98","3"],["Q","132","31","92","55"],["L","109","65"]],"_t":[8,8,8,"","","","",""]}]};ki.kl.lr.scale=0.2;ki.kl.lr.load();ki.kl.ls=mge.image.create();ki.kl.ls.config={"_s":{"_w":130,"_h":80},"_p":[{"_fs":["N",""],"_ss":["#000000","20","round","round"],"_gp":[],"_c":[["M","35","0"],["Q","24","31","13","65"],["L","30","69"],["M","98","3"],["Q","103","31","108","67"],["L","119","64"]],"_t":[8,8,8,"","","","",""]}]};ki.kl.ls.scale=0.2;ki.kl.ls.load();ki.kl.lt=mge.image.create();ki.kl.lt.config={"_s":{"_w":130,"_h":80},"_p":[{"_fs":["N",""],"_ss":["#000000","20","round","round"],"_gp":[],"_c":[["M","35","0"],["Q","61","24","19","56"],["L","36","64"],["M","98","3"],["Q","99","31","97","69"],["L","114","69"]],"_t":[8,8,8,"","","","",""]}]};ki.kl.lt.scale=0.2;ki.kl.lt.load();ki.kl.lu=mge.image.create();ki.kl.lu.config={"_s":{"_w":130,"_h":80},"_p":[{"_fs":["N",""],"_ss":["#000000","20","round","round"],"_gp":[],"_c":[["M","35","0"],["Q","39","24","48","71"],["L","62","66"],["M","97","3"],["Q","93","31","89","59"],["L","103","69"]],"_t":[8,8,8,"","","","",""]}]};ki.kl.lu.scale=0.2;ki.kl.lu.load();ki.kl.level1Background1=mge.image.create();ki.kl.level1Background1.config={"_s":{"_w":1300,"_h":750},"_p":[{"_fs":["LG","0","0","0","750"],"_ss":["#000000","1","round","round"],"_gp":[[0,"#ccafdf"],[1,"#ffffff"]],"_c":[["R","0","0","1300","750"]],"_t":[8,8,8,"","","","",""]}]};ki.kl.level1Background1.load();ki.kn.level1Background1=mge.bv.bp.createPattern(ki.kl.level1Background1.il,'repeat');ki.kl.level1Background2=mge.image.create();ki.kl.level1Background2.config={"_s":{"_w":1300,"_h":750},"_p":[{"_fs":["C","#c8a2e2"],"_ss":["#000000","0","round","round"],"_gp":[],"_c":[["M","0","375"],["L","250","300"],["L","1000","450"],["L","1300","375"],["L","1300","750"],["L","0","750"]],"_t":[8,8,8,"","","","",""]}]};ki.kl.level1Background2.load();ki.kn.level1Background2=mge.bv.bp.createPattern(ki.kl.level1Background2.il,'repeat');ki.kl.level1Background3=mge.image.create();ki.kl.level1Background3.config={"_s":{"_w":1300,"_h":750},"_p":[{"_fs":["C","#a26ac8"],"_ss":["#000000","0","round","round"],"_gp":[],"_c":[["M","0","500"],["L","131","600"],["L","1000","400"],["L","1300","500"],["L","1300","750"],["L","0","750"]],"_t":[8,8,8,"","","","",""]}]};ki.kl.level1Background3.load();ki.kn.level1Background3=mge.bv.bp.createPattern(ki.kl.level1Background3.il,'repeat');let mb={"_s":{"_w":30,"_h":30},"_p":[{"_fs":["C","#582970"],"_ss":["#000000","0","round","round"],"_gp":[],"_c":[["R","0","0","30","30"]],"_t":[8,8,8,"","","","",""]},{"_fs":["C","#5d2c77"],"_ss":["#5d2c77","0","round","round"],"_gp":[],"_c":[["M","0","0"],["L","30","0"],["L","30","30"]],"_t":[8,8,8,"","","","",""]}]};let mc={"_s":{"_w":30,"_h":30},"_p":[{"_fs":["C","#582970"],"_ss":["#000000","0","round","round"],"_gp":[],"_c":[["R","0","0","30","30"]],"_t":[8,8,8,"","","","",""]},{"_fs":["C","#5d2c77"],"_ss":["#000000","0","round","round"],"_gp":[],"_c":[["R","5","5","20","20"]],"_t":[8,8,8,"","","","",""]}]};let md={"_s":{"_w":30,"_h":30},"_p":[{"_fs":["C","#582970"],"_ss":["#000000","0","round","round"],"_gp":[],"_c":[["R","0","0","30","30"]],"_t":[8,8,8,"","","","",""]},{"_fs":["C","#5d2c77"],"_ss":["#000000","0","round","round"],"_gp":[],"_c":[["C","15","15","5"]],"_t":[8,8,8,"","","","",""]}]};let me={"_s":{"_w":30,"_h":30},"_p":[{"_fs":["C","#582970"],"_ss":["#000000","0","round","round"],"_gp":[],"_c":[["R","0","0","30","30"]],"_t":[8,8,8,"","","","",""]},{"_fs":["C","#5d2c77"],"_ss":["#000000","0","round","round"],"_gp":[],"_c":[["M","15","0"],["L","30","15"],["L","15","30"],["L","0","15"]],"_t":[8,8,8,"","","","",""]}]};let mf={"_s":{"_w":30,"_h":30},"_p":[{"_fs":["C","#582970"],"_ss":["#000000","0","round","round"],"_gp":[],"_c":[["R","0","0","30","30"]],"_t":[8,8,8,"","","","",""]},{"_fs":["C","#5d2c77"],"_ss":["#000000","0","round","round"],"_gp":[],"_c":[["M","12","0"],["L","18","0"],["L","30","12"],["L","30","18"],["M","0","12"],["L","0","18"],["L","12","30"],["L","18","30"]],"_t":[8,8,8,"","","","",""]}]};let mg={"_s":{"_w":30,"_h":30},"_p":[{"_fs":["C","#582970"],"_ss":["#000000","0","round","round"],"_gp":[],"_c":[["R","0","0","30","30"]],"_t":[8,8,8,"","","","",""]},{"_fs":["C","#5d2c77"],"_ss":["#000000","0","round","round"],"_gp":[],"_c":[["M","12","0"],["L","18","0"],["L","30","12"],["L","30","18"],["M","0","12"],["L","0","18"],["L","12","30"],["L","18","30"],["M","0","12"],["L","12","0"],["L","18","0"],["L","0","18"]],"_t":[8,8,8,"","","","",""]}]};let mh={"_s":{"_w":30,"_h":30},"_p":[{"_fs":["C","#582970"],"_ss":["#000000","0","round","round"],"_gp":[],"_c":[["R","0","0","30","30"]],"_t":[8,8,8,"","","","",""]},{"_fs":["C","#5d2c77"],"_ss":["#000000","0","round","round"],"_gp":[],"_c":[["R","0","0","30","3"],["R","0","15","30","3"],["R","0","0","3","15"],["R","15","15","3","15"]],"_t":[8,8,8,"","","","",""]}]};let mi={"_s":{"_w":30,"_h":30},"_p":[{"_fs":["C","#582970"],"_ss":["#000000","0","round","round"],"_gp":[],"_c":[["R","0","0","30","30"]],"_t":[8,8,8,"","","","",""]},{"_fs":["C","#5d2c77"],"_ss":["#5d2c77","0","round","round"],"_gp":[],"_c":[["M","0","10"],["B","20","-10","10","35","30","10"],["L","30","20"],["B","10","40","20","-5","0","20"]],"_t":[8,8,8,"","","","",""]}]};let mj={"_s":{"_w":30,"_h":30},"_p":[{"_fs":["C","#582970"],"_ss":["#000000","0","round","round"],"_gp":[],"_c":[["R","0","0","30","30"]],"_t":[8,8,8,"","","","",""]},{"_fs":["C","#5d2c77"],"_ss":["#5d2c77","0","round","round"],"_gp":[],"_c":[["M","0","12"],["B","20","-25","8","30","30","12"],["L","30","17"],["B","12","55","20","1","0","17"]],"_t":[8,8,8,"","","","",""]}]};ki.kn.level1BlockDiv=ki.kl.ahColoredPattern(me,'#ead02b','red');ki.kn.level1BlockGreat=ki.kl.ahColoredPattern(mj,'#582970','#5d2c77')};ki.kq.electricPiano={play:function(an,ad,ae,aq){let al={heADSR:{a:0.01,d:0.2,s:0.8,r:0.1,minValue:0,maxValue:aq},oscType:'sine'};let _detune1=Object.create(al);let _detune2=Object.create(al);let _detune3=Object.create(al);_detune1.detuneADSR={a:0.5,d:0.5,s:1,r:0,minValue:-3,maxValue:3};_detune2.detuneADSR={a:0.7,d:0.7,s:1,r:0,minValue:5,maxValue:-5};_detune2.detuneADSR={a:0.8,d:0.6,s:1,r:0,minValue:-5,maxValue:5};let _noise={heADSR:{a:0.01,d:0.3,s:0,r:0,minValue:0,maxValue:aq},oscType:'noise',filterType:'lowpass',filterFreqADSR:{a:0.01,d:0.4,s:0,r:0,minValue:500,maxValue:500}};mge.hg.hf(al,an,ad,ae,aq);mge.hg.hf(_detune1,an,ad,ae,aq);mge.hg.hf(_detune2,an,ad,ae,aq);mge.hg.hf(_detune3,an,ad,ae,aq);mge.hg.hf(_noise,an,ad,ae,aq)}};ki.kr.liSong.config={"_str":[0,0,1],"_p":[{"_b":[["D2",2,"D2",2],["G2",2,"G2",2],["C2",2,"C2",2],["A2",2,"A2",2]],"_s":[[0,1,2,2],[3,0,1,1]]},{"_b":[["D4",4],["G4",4],["C4",4],["A4",4]],"_s":[[0,1,2,2],[3,0,1,1]]}]};ki.kr.liSong.playSongElectricPiano=function(){mge.hi.stop();mge.hi.reset();let orchestra=[];orchestra.push(ki.kq.electricPiano);orchestra.push(ki.kq.electricPiano);let mix=[1,0.9];let bpm=120;ki.kr.liSong.play(bpm,orchestra,mix)};ki.kt.mm=function(mn){ki.kp.lc=[];ki.ko.platform.hz();for(let _pltf of mn.mo){ki.ko.platform.init(_pltf)};ki.ko.numbers.hz();for(let _num of mn.mp){ki.ko.numbers.init(_num)};ki.ko.background.hz();for(let _bkg of mn.mq){ki.ko.background.init(_bkg,mn.mt)};ki.ko.player.X=mn.gqer.X;ki.ko.player.Y=mn.gqer.Y;ki.kp.la=mn.mt.X;ki.kp.lb=mn.mt.Y;ki.kp.ld=mn.ms._plt;ki.kp.lf= mn.ms._num};ki.kt.createLevels=function(){ki.kt.push({mq:[{bn:'1',bl:1300,bm:750,X:2000,Y:-100,mx:0,my:ki.kn.level1Background1},{bn:'2',bl:5000,bm:750,X:2000,Y:-150,mx:0.5,my:ki.kn.level1Background2},{bn:'3',bl:7000,bm:750,X:2000,Y:-150,mx:0.75,my:ki.kn.level1Background3}],mo:[{bn:'1',bl:2700,bm:300,X:0,Y:0,my:ki.kn.level1BlockGreat},{bn:'1bis',bl:600,bm:30,X:1830,Y:0,mz:{na:'TEXT_BOX:HI 13,WELCOME TO NUMBERLAND!'}},{bn:'2',bl:270,bm:2700,X:2430,Y:-2700,my:ki.kn.level1BlockGreat},{bn:'3',bl:1800,bm:90,X:0,Y:-90,my:ki.kn.level1BlockGreat,_radiusStyle:[0,10]},{bn:'4',bl:1440,bm:180,X:0,Y:-270,my:ki.kn.level1BlockGreat,_radiusStyle:[0,10]},{bn:'5',bl:180,bm:30,X:1900,Y:-200,my:ki.kn.level1BlockGreat,_radiusStyle:10},{bn:'6',bl:180,bm:30,X:1620,Y:-310,my:ki.kn.level1BlockDiv,_radiusStyle:10},{bn:'6bis',bl:180,bm:30,X:1620,Y:-310,mz:{na:'TEXT_BOX:'}},{bn:'7',bl:210,bm:30,X:1310,Y:-420,my:ki.kn.level1BlockDiv,_radiusStyle:10},{bn:'8',bl:150,bm:25,X:1310,Y:-420,mz:{na:'NUM_DETECTED:56'}},{bn:'8bis',bl:150,bm:25,X:1310,Y:-420,mz:{na:'TEXT_BOX:IT SEEMS NUMBERS ARE AFRAID WHEN THEY SEE YOU'}},{bn:'9',bl:30,bm:160,X:850,Y:-270,my:'#582970',nb:{X:850,Y:-430,nc:0,nd:-1000}},{bn:'10',bl:40,bm:40,X:1350,Y:-460,my:'#417029',ne:{nf:900,ng:1400,nh:1300,ni:-290,nj:'left'}},{bn:'11',bl:40,bm:40,X:600,Y:-310,my:'#e67e22'}],gqer:{X:2200,Y:-100},mp:[{bn:'56',X:1400,Y:-306,nf:1200,ng:1420,nc:100,nk:800,_velocityEscape:-400,ni:-305,_velocityFall:200,nl:'PLTF_MOVE:9',nfFallen:-10000,ngFallen:800,ncFallen:100,np:'',nq:'FEAR!',nr:'FEAR!',ns:'#390052',nt:'#390052'}],ms:{_plt:'11',_num:'Player'},mt:{X:2000,Y:-100}});ki.kt.push({mq:[],mo:[{bn:'11',bl:2700,bm:270,X:0,Y:0,my:ki.kn.level1BlockGreat},{bn:'5',bl:180,bm:30,X:1900,Y:-200,my:ki.kn.level1BlockDiv,_radiusStyle:10}],gqer:{X:2200,Y:-100},mp:[{bn:'56',X:1400,Y:-306,nf:1200,ng:1420,nc:100,nk:800,ns:'#390052',nt:'#390052'}],ms:{_plt:'5',_num:'Player'},mt:{X:2000,Y:-100}})};ki.kk.lh.start=function(){ki.kl.init();ki.km.init();while(mge.song.loadNextSong()<1){};ki.ko.ll.init();ki.ko.lm.init();ki.ko.eye.init();ki.ko.legs.init();ki.ko.textBox.init();ki.kt.createLevels();ki.kj='ready'};ki.kk.lh.update=function(){ki.ko.lm.update()};ki.kk.lh.draw=function(){ki.ko.ll.draw();ki.ko.lm.draw()};ki.kk.li.start=function(){ki.ko.eye.hz();ki.ko.legs.hz();ki.ko.player.init();ki.kt.mm(ki.kt[ki.kp.kz]);ki.ko.textBox.init();ki.kj='running'};ki.kk.li.update=function(){ki.ko.player.update();if(ki.kp.la<ki.ko.player.X-ki.kp.ku){ki.kp.la=ki.ko.player.X-ki.kp.ku};if(ki.kp.la>ki.ko.player.X+ki.kp.ku){ki.kp.la=ki.ko.player.X+ki.kp.ku};if(ki.kp.lb<ki.ko.player.Y-ki.kp.kv){ki.kp.lb=ki.ko.player.Y-ki.kp.kv};if(ki.kp.lb>ki.ko.player.Y+ki.kp.kv){ki.kp.lb=ki.ko.player.Y+ki.kp.kv};ki.ko.numbers.ib('update');ki.ko.background.ib('update');for(let na of ki.kp.lc){if(na.split(':')[0]=='TEXT_BOX'){ki.ko.textBox.ov=na.split(':')[1];ki.kp.lc=ki.kp.lc.filter(e=>e !==na)}};if(ki.ks.lk(ki.kp.le,ki.kp.lg)){ki.kj='completed';if(ki.kp.kz<ki.kt.length-1){ki.kp.kz+=1;}else{ki.kp.kz=0};mge.ki.hk(ki.kk.lj)}};ki.kk.li.draw=function(){ki.ko.background.ib('draw');ki.ko.platform.ib('draw');ki.ko.numbers.ib('draw');ki.ko.player.draw();ki.ko.eye.ib('draw');ki.ko.legs.ib('draw');ki.ko.textBox.draw()};ki.kk.lj.start=function(){this.cgScene=Date.now()};ki.kk.lj.update=function(){if(Date.now()-this.cgScene>2000){mge.ki.hk(ki.kk.li)}};ki.kk.lj.draw=function(){ki.ko.textBox.ov='LEVEL COMPLETED';ki.ko.textBox.draw()};ki.ko.ll.init=function(){this.width=ki.kl.ll.width;this.height=ki.kl.ll.height;this.x=640;this.y=650};ki.ko.ll.hr=function(ctx){ki.kl.ll.draw(ctx)};ki.ko.lm.init=function(){this.width=ki.kl.lm.width;this.height=ki.kl.lm.height;this.x=640;this.y=300};ki.ko.lm.update=function(){if(this.hp){mge.ki.hk(ki.kk.li)}};ki.ko.lm.hr=function(ctx){ki.kl.lm.draw(ctx)};ki.ko.platform.init=function(op){let fk=ki.ko.platform.hy();fk.width=op.bl;fk.height=op.bm;fk.X=op.X+op.bl/2;fk.Y=op.Y+op.bm/2;fk._pp=0;fk.nd=0;fk.ee=false;fk.bn=op.bn||'';fk.lz=op.lz||'';fk.my=op.my||'';fk._radiusStyle=op._radiusStyle||0;fk.ne=op.ne||'';fk._autoJumpForce=op._autoJumpForce||0;fk.mz=op.mz||'';fk.nb=op.nb||'';fk.os=false;return fk};ki.ko.platform.hr=function(ctx){if(ki.ks.lk({xMin:this.x-this.width/2,xMax:this.x+this.width*2,yMin:this.y-this.height/2,yMax:this.y+this.height/2},{xMin:0,xMax:mge.ki.width,yMin:0,yMax:mge.ki.height})){if(this.my!=''){ctx.fillStyle=this.my;ctx.beginPath();ctx.roundRect(0,0,this.width,this.height,this._radiusStyle);ctx.fill()};if(this.lz!=''){this.lz.draw(ctx)}}};ki.ko.platform.managePlatformCollisions=function(){let _p=ki.ko.player;let _on=1/mge.ki.fps;this.ee=false;let flBox={xMin:this.X-this.width/2,xMax:this.X+this.width/2,yMin:this.Y-this.height/2,yMax:this.Y+this.height/2};if(ki.ks.lk(flBox,_p.pf)){_p.pa=true;this.ee=true;if(this.ne!='' && _p.pq>0){this.X=_p.X+_p.width/2+this.width/2+_p.pe;_p.pa=false;_p.pq=0;if(this.X>=this.ne.ng){this.X=this.ne.ng;_p.pa=true}}};if(ki.ks.lk(flBox,_p.pg)){_p.pb=true;this.ee=true;if(this.ne!='' && _p.pq<0){this.X=_p.X-_p.width/2-this.width/2-_p.pe;_p.pb=false;_p.pq=0;if(this.X<=this.ne.nf){this.X=this.ne.nf;_p.pb=true}}};if(ki.ks.lk(flBox,_p.ph)){_p.pc=true;this.ee=true};if(ki.ks.lk(flBox,_p.pi)){_p.pd=true;this.ee=true;if(this._autoJumpForce !=0){ki.ko.player.pr=-this._autoJumpForce;ki.ko.player.Y=this.Y-this.height/2-ki.ko.player.height/2;_p.pd=false}};if(this.ne!=''){if(this.Y<this.ne.ni){if((this.ne.nj=='right' && this.X>=this.ne.nh)||(this.ne.nj=='left' && this.X<=this.ne.nh)){this._pp=ki.kp.ky;this.nd+=this._pp*_on;this.Y=Math.min(this.Y+this.nd*_on,this.ne.ni)}}};if(this.nb!='' && this.os){if(this.nb.nd<0){this.Y=Math.max(this.Y+this.nb.nd*_on,this.nb.Y+this.bm/2);}else{this.Y=Math.min(this.Y+this.nb.nd*_on,this.nb.Y+this.bm/2)};if(this.nb.nc<0){this.X=Math.max(this.X+this.nb.nc*_on,this.nb.X+this.bl/2);}else{this.X=Math.min(this.X+this.nb.nc*_on,this.nb.X+this.bl/2)}};this.x=this.X-ki.kp.la+mge.ki.width/2;this.y=this.Y-ki.kp.lb+mge.ki.height/2;if(this.bn==ki.kp.ld){ki.kp.le={xMin:this.x-this.width/2,xMax:this.x+this.width/2,yMin:this.y-this.height/2,yMax:this.y+this.height/2}};if(this.mz!=''&&this.ee){if(!ki.kp.lc.includes(this.mz.na)){ki.kp.lc.push(this.mz.na)};this.my=this.mz.my||'';this.lz=this.mz.lz||'';this.mz=''};for(let na of ki.kp.lc){if(na=='PLTF_DESTROY:'+this.bn){this.ia();ki.kp.lc=ki.kp.lc.filter(e=>e !==na)};if(na=='PLTF_MOVE:'+this.bn){this.os=true;ki.kp.lc=ki.kp.lc.filter(e=>e !==na)}}};ki.ko.eye.init=function(){this.width=ki.kl.lo.width;this.height=ki.kl.lo.height;this.og='normal';this.oh='';mge.animation.loadExtention(this);this.animation.timeBetweenFrames=100};ki.ko.eye.hr=function(ctx){if(this.og !=this.oh){if(this.og=='normal'){this.animation.frames=ki.km.eye};this.animation.restart()};this.oh=this.og;this.animation.draw(ctx)};ki.ko.legs.init=function(){this.width=ki.kl.lq.width;this.height=ki.kl.lq.height;this.og='idle';this.oh='';mge.animation.loadExtention(this);this.animation.timeBetweenFrames=100};ki.ko.legs.hr=function(ctx){if(this.og !=this.oh){if(this.og=='idle'){this.animation.frames=ki.km.lq};if(this.og=='walk'){this.animation.frames=ki.km.ml};this.animation.restart()};this.oh=this.og;this.animation.draw(ctx)};ki.ko.numbers.init=function(ok){let fk=ki.ko.numbers.hy();fk.width=ki.kp.kw;fk.height=ki.kp.kx;fk.bn=ok.bn||'';fk.X=ok.X;fk.Y=ok.Y;fk.nf=ok.nf||0;fk.ng=ok.ng||0;fk.nc=ok.nc||200;fk.nd=0;fk.nk=ok.nk||0;fk._velocityEscape=ok._velocityEscape||0;fk.ni=ok.ni||0;fk._velocityFall=ok._velocityFall||0;fk.nl=ok.nl||'';fk.nfFallen=ok.nfFallen||0;fk.ngFallen=ok.ngFallen||0;fk.ncFallen=ok.ncFallen||0;fk.ol=false;fk.ns=ok.ns||'black';fk.nt=ok.nt||'black';fk.np=ok.np||'';fk.nq=ok.nq||'';fk.nr=ok.nr||'';fk.om='';fk.ps=ki.ko.eye.hy();mge.animation.activateOwnCloneAnimation(fk.ps);fk.pt=ki.ko.legs.hy();mge.animation.activateOwnCloneAnimation(fk.pt);return fk};ki.ko.numbers.update=function(){let on=Math.min(1/mge.ki.fps,0.04);this.X+=Math.round(this.nc*on);this.Y+=Math.round(this.nd*on);if(!this.ol){if((this.X>this.ng && this.nc>0)||(this.X<this.nf && this.nc<0)){this.nc=this.nc*-1;this.om=this.np};}else{if((this._velocityEscape<0 && this.X>this.nk && this.Y<this.ni)||(this._velocityEscape>0 && this.X<this.nk && this.Y<this.ni)){this.nc=this._velocityEscape;this.om=this.nq};if((this._velocityEscape<0 && this.X<=this.nk && this.Y<this.ni)||(this._velocityEscape>0 && this.X>=this.nk && this.Y<this.ni)){this.nc=0;this.X=this.nk;this.nd=this._velocityFall;this.om=this.nq;if(this.nl !='' && !ki.kp.lc.includes(this.nl)){ki.kp.lc.push(this.nl)}};if(this.Y>=this.ni){this.nd=0;this.Y=this.ni;this.om=this.nr;if(this.nc==0){this.nc=this.ncFallen};if((this.X>this.ngFallen && this.nc>0)||(this.X<this.nfFallen && this.nc<0)){this.nc=this.nc*-1}}};this.x=this.X-ki.kp.la+mge.ki.width/2;this.y=this.Y-ki.kp.lb+mge.ki.height/2;if(this.bn==ki.kp.lf){ki.kp.lg={xMin:this.x-this.width/2,xMax:this.x+this.width/2,yMin:this.y-this.height/2,yMax:this.y+this.height/2}};for(let na of ki.kp.lc){if(na=='NUM_DETECTED:'+this.bn){this.ol=true;ki.kp.lc=ki.kp.lc.filter(e=>e !==na)}}};ki.ko.numbers.hr=function(ctx){ctx.font='bold 50px serif';ctx.textAlign='center';ctx.textBaseline='middle';ctx.fillStyle=this.ns;ctx.fillText(this.bn,this.bl/2,this.bm/2+7);this.ps.og='normal';this.ps.x=this.x-5;this.ps.y=this.y-25;this.ps.hs=1;if(this.nc<=0){this.ps.og='normal';this.ps.x=this.x-5;this.ps.y=this.y-25;this.ps.hs=1;}else{this.ps.og='normal';this.ps.x=this.x;this.ps.y=this.y-25;this.ps.hs=-1};if(Math.abs(this.nc)<1){this.pt.og='idle';this.pt.x=this.x;this.pt.y=this.y+29;this.pt.hs=1};if(this.nc<=-1){this.pt.og='walk';this.pt.x=this.x;this.pt.y=this.y+29;this.pt.hs=-1};if(this.nc>=1){this.pt.og='walk';this.pt.x=this.x;this.pt.y=this.y+29;this.pt.hs=1};if(Math.abs(this.nd>0)){this.pt.og='idle';this.pt.x=this.x;this.pt.y=this.y+29;this.pt.hs=1};if(this.om !=''){ctx.fillStyle='white';ctx.strokeStyle=this.nt;ctx.beginPath();ctx.roundRect(-10,-45,80,35,10);ctx.fill();ctx.font='24px serif';ctx.textAlign='center';ctx.textBaseline='middle';ctx.fillStyle=this.nt;ctx.fillText(this.om,this.width/2,-25)}};ki.ko.textBox.init=function(){this.width=800;this.height=50;this.x=mge.ki.width/2;this.y=this.height/2+5;this.ov=''};ki.ko.textBox.hr=function(ctx){if(this.ov !=''){ctx.fillStyle='white';ctx.strokeStyle='black';ctx.lineWidth=2;ctx.fillRect(0,0,this.width,this.height);ctx.strokeRect(0,0,this.width,this.height);ctx.font='24px serif';ctx.textAlign='center';ctx.textBaseline='middle';ctx.fillStyle='black';ctx.fillText(this.ov,this.width/2,this.height/2);ki.kl.pi.draw(ctx)}};ki.ko.background.init=function(nv,nw){let fk=ki.ko.background.hy();fk.width=nv.bl||mge.ki.width;fk.height=nv.bm||mge.ki.height;fk.X=nv.X+mge.ki.width/2;fk.Y=nv.Y+mge.ki.height/2;fk._lainit=nw.X;fk._lbinit=nw.Y;fk.mx=nv.mx;fk.my=nv.my;return fk};ki.ko.background.update=function(){let oc=this._lainit-ki.kp.la;let od=this._lainit-oc*this.mx;let oe=this._lbinit-ki.kp.lb;let of=this._lbinit-oe*this.mx;this.x=this.X-od;this.y=this.Y-of};ki.ko.background.hr=function(ctx){ctx.fillStyle=this.my;ctx.fillRect(0,0,this.width,this.height)};ki.ko.player.init=function(){this.x=mge.ki.width/2;this.y=mge.ki.height/2;this.width=ki.kp.kw;this.height=ki.kp.kx;this.X=200;this.Y=0;this.ow=false;this.ox=false;this.oy=false;this.oz=false;this.pa=false;this.pb=false;this.pc=false;this.pd=false;this.pe=10;this.pf={};this.pg={};this.ph={};this.pi={};this.pj=10000;this.pjWhenNoTouching=8000;this.pl=70000;this.pm=3000;this.pn=0.3;this.po=0;this.pp=0;this.pq=0;this.pr=0;this.ps=ki.ko.eye.hy();mge.animation.activateOwnCloneAnimation(this.ps);this.pt=ki.ko.legs.hy();mge.animation.activateOwnCloneAnimation(this.pt)};ki.ko.player.update=function(){let on=Math.min(1/mge.ki.fps,0.04);let pu=this.X;let pv=this.Y;if(mge.ho.hn('ArrowRight')&& !mge.ho.hn('ArrowLeft')){this.ox=true}else{this.ox=false};if(mge.ho.hn('ArrowLeft')&& !mge.ho.hn('ArrowRight')){this.ow=true}else{this.ow=false};if(mge.ho.hn('ArrowUp')&& !mge.ho.hn('ArrowDown')){this.oy=true}else{this.oy=false};if(mge.ho.hn('ArrowDown')&& !mge.ho.hn('ArrowUp')){this.oz=true}else{this.oz=false};this.po=0;if(this.ow && this.pd){this.po=-this.pj};if(this.ox && this.pd){this.po=this.pj};if(this.ow && !this.pd){this.po=-this.pjWhenNoTouching};if(this.ox && !this.pd){this.po=this.pjWhenNoTouching};this.pp=0;if(this.oy && this.pd){this.pp=-this.pl};this.pp+=ki.kp.ky;this.pq+=this.po*on;this.pq=this.pq*(1-this.pn);if(this.pq>0 && this.pq>this.pm){this.pq=this.pm};if(this.pq<0 && this.pq<-this.pm){this.pq=-this.pm};this.pr+=this.pp*on;this.X+=Math.round(this.pq*on);this.Y+=Math.round(this.pr*on);this.pf={xMin:this.X+this.width/2,xMax:this.X+this.width/2+this.pe,yMin:this.Y-this.height/2+this.pe,yMax:this.Y+this.height/2-this.pe};this.pg={xMin:this.X-this.width/2-this.pe,xMax:this.X-this.width/2,yMin:this.Y-this.height/2+this.pe,yMax:this.Y+this.height/2-this.pe};this.ph=  {xMin:this.X-this.width/2+this.pe,xMax:this.X+this.width/2-this.pe,yMin:this.Y-this.height/2,yMax:this.Y-this.height/2+this.pe};this.pi={xMin:this.X-this.width/2+this.pe,xMax:this.X+this.width/2-this.pe,yMin:this.Y+this.height/2-this.pe,yMax:this.Y+this.height/2};this.pa=false;this.pb=false;this.pc=false;this.pd=false;ki.ko.platform.ib('managePlatformCollisions');if(this.pa & !(this.ow)){this.X=pu;this.pq=0};if(this.pb & !(this.ox)){this.X=pu;this.pq=0};if(this.pd||this.pc){this.Y=pv;this.pr=0};this.x=this.X-ki.kp.la+mge.ki.width/2;this.y=this.Y-ki.kp.lb+mge.ki.height/2;if(ki.kp.lf=='Player'){ki.kp.lg={xMin:this.x-this.width/2-10,xMax:this.x+this.width/2+10,yMin:this.y-this.height/2-10,yMax:this.y+this.height/2+10}};if(ki.kp.ld=='Player'){ki.kp.le={xMin:this.x-this.width/2,xMax:this.x+this.width/2,yMin:this.y-this.height/2,yMax:this.y+this.height/2}}};ki.ko.player.hr=function(ctx){ki.kl.ln.draw(ctx);if(this.pq<=0){this.ps.og='normal';this.ps.x=this.x-5;this.ps.y=this.y-25;this.ps.hs=1;}else{this.ps.og='normal';this.ps.x=this.x;this.ps.y=this.y-25;this.ps.hs=-1};if(!(this.ox||this.ow)){this.pt.og='idle';this.pt.x=this.x;this.pt.y=this.y+29;this.pt.hs=1};if(this.ow){this.pt.og='walk';this.pt.x=this.x;this.pt.y=this.y+29;this.pt.hs=-1};if(this.ox){this.pt.og='walk';this.pt.x=this.x;this.pt.y=this.y+29;this.pt.hs=1}}